{"ast":null,"code":"import{useState,useEffect}from\"react\";import{validateWorksData,worksData}from\"../data/works\";import{worksDynamicData}from\"../data/works-dynamic\";import{readFromLocalStorage,saveToLocalStorage}from\"../lib/fileUtils\";import{autoGenerateWorksData}from\"../lib/worksAutoGenerator\";const STORAGE_KEY=\"works-data-backup\";// „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁî®„Å´Â§âÊõ¥\nexport function useWorksData(){const[works,setWorks]=useState([]);const[isLoading,setIsLoading]=useState(true);// „Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø\nuseEffect(()=>{const loadData=async()=>{try{console.log(\"üîÑ „Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÈñãÂßã...\");let loadedWorks=[];// „Åæ„Åö„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Çí„ÉÅ„Çß„ÉÉ„ÇØ\nconst backupData=readFromLocalStorage(STORAGE_KEY);console.log(\"„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éá„Éº„Çø:\",backupData.length,\"‰ª∂\");if(backupData.length>0){console.log(\"üíæ „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„ÇâÂæ©ÂÖÉ„Åó„Åæ„Åô:\",backupData.length,\"‰ª∂\");const validData=backupData.filter(validateWorksData);console.log(\"„Éê„É™„Éá„Éº„Ç∑„Éß„É≥Âæå„ÅÆ„Éá„Éº„Çø‰ª∂Êï∞:\",validData.length,\"‰ª∂\");loadedWorks=validData;}else{console.log(\"üìã „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì\");console.log(\"TypeScript„Éï„Ç°„Ç§„É´„Åã„ÇâË™≠„ÅøËæº„Åø„Åæ„Åô...\");// TypeScript„Éï„Ç°„Ç§„É´„Åã„ÇâÁõ¥Êé•Ë™≠„ÅøËæº„Åø\nconst validData=worksDynamicData.filter(validateWorksData);console.log(\"‚úÖ TypeScript„Éï„Ç°„Ç§„É´„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\",validData.length,\"‰ª∂\");loadedWorks=validData;}// Ëá™ÂãïÁîüÊàêÊ©üËÉΩ: public/images/worksÂÜÖ„ÅÆ„Éï„Ç©„É´„ÉÄ„Åã„ÇâËá™ÂãïÁöÑ„Å´works„Éá„Éº„Çø„ÇíÁîüÊàê\nconst mergedWorks=await autoGenerateWorksData(loadedWorks);// „Éá„Éº„Çø„ÇíË®≠ÂÆö\nsetWorks(mergedWorks);// Ëá™ÂãïÁîüÊàê„Åï„Çå„Åü„Éá„Éº„Çø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò\nif(mergedWorks.length>loadedWorks.length){console.log(\"\\uD83C\\uDD95 \".concat(mergedWorks.length-loadedWorks.length,\"\\u4EF6\\u306E\\u65B0\\u898Fworks\\u30C7\\u30FC\\u30BF\\u304C\\u81EA\\u52D5\\u751F\\u6210\\u3055\\u308C\\u307E\\u3057\\u305F\"));saveToLocalStorage(STORAGE_KEY,mergedWorks);}else if(backupData.length===0){// ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇ„ÅØÂøÖ„Åö‰øùÂ≠ò\nsaveToLocalStorage(STORAGE_KEY,mergedWorks);}}catch(error){console.error(\"‚ùå „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:\",error);console.log(\"ÂàùÊúü„Éá„Éº„Çø„Çí‰ΩøÁî®„Åó„Åæ„Åô\");// „Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØÂàùÊúü„Éá„Éº„Çø„Çí‰ΩøÁî®\nsetWorks(worksData);}finally{setIsLoading(false);}};loadData();},[]);// „Éá„Éº„Çø„Çí‰øùÂ≠ò\nconst saveWorks=async newWorks=>{try{console.log(\"üíæ „Éá„Éº„Çø„Çí‰øùÂ≠ò‰∏≠...\",newWorks.length,\"‰ª∂\");// „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´Âç≥Â∫ß„Å´‰øùÂ≠òÔºàUIÊõ¥Êñ∞Ôºâ\nconst success=saveToLocalStorage(STORAGE_KEY,newWorks);if(success){console.log(\"‚úÖ „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠òÂÆå‰∫Ü\");setWorks(newWorks);}else{console.error(\"‚ùå „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å∏„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");}}catch(error){console.error(\"‚ùå „Éá„Éº„Çø„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:\",error);}};// „Éá„Éº„Çø„ÇíËøΩÂä†\nconst addWork=async newWork=>{const updatedWorks=[...works,newWork];await saveWorks(updatedWorks);};// „Éá„Éº„Çø„ÇíÊõ¥Êñ∞\nconst updateWork=async(id,updatedWork)=>{const updatedWorks=works.map(work=>work.id===id?updatedWork:work);await saveWorks(updatedWorks);};// „Éá„Éº„Çø„ÇíÂâäÈô§\nconst deleteWork=async id=>{const updatedWorks=works.filter(work=>work.id!==id);await saveWorks(updatedWorks);};// „Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„ÉàÔºàÂàùÊúü„Éá„Éº„Çø„Å´Êàª„ÅôÔºâ\nconst resetWorks=async()=>{await saveWorks(worksData);};// ÁâπÂÆö„ÅÆ‰ΩúÂìÅ„ÇíÂèñÂæó\nconst getWork=id=>{return works.find(work=>work.id===id);};return{works,isLoading,saveWorks,addWork,updateWork,deleteWork,resetWorks,getWork};}","map":{"version":3,"names":["useState","useEffect","validateWorksData","worksData","worksDynamicData","readFromLocalStorage","saveToLocalStorage","autoGenerateWorksData","STORAGE_KEY","useWorksData","works","setWorks","isLoading","setIsLoading","loadData","console","log","loadedWorks","backupData","length","validData","filter","mergedWorks","concat","error","saveWorks","newWorks","success","addWork","newWork","updatedWorks","updateWork","id","updatedWork","map","work","deleteWork","resetWorks","getWork","find"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/hooks/useWorksData.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Works, validateWorksData, worksData } from \"../data/works\";\nimport { worksDynamicData } from \"../data/works-dynamic\";\nimport { readFromLocalStorage, saveToLocalStorage } from \"../lib/fileUtils\";\nimport { autoGenerateWorksData } from \"../lib/worksAutoGenerator\";\n\nconst STORAGE_KEY = \"works-data-backup\"; // „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁî®„Å´Â§âÊõ¥\n\nexport function useWorksData() {\n  const [works, setWorks] = useState<Works[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // „Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        console.log(\"üîÑ „Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÈñãÂßã...\");\n\n        let loadedWorks: Works[] = [];\n\n        // „Åæ„Åö„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Çí„ÉÅ„Çß„ÉÉ„ÇØ\n        const backupData = readFromLocalStorage(STORAGE_KEY);\n        console.log(\"„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éá„Éº„Çø:\", backupData.length, \"‰ª∂\");\n\n        if (backupData.length > 0) {\n          console.log(\n            \"üíæ „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„ÇâÂæ©ÂÖÉ„Åó„Åæ„Åô:\",\n            backupData.length,\n            \"‰ª∂\"\n          );\n          const validData = backupData.filter(validateWorksData);\n          console.log(\"„Éê„É™„Éá„Éº„Ç∑„Éß„É≥Âæå„ÅÆ„Éá„Éº„Çø‰ª∂Êï∞:\", validData.length, \"‰ª∂\");\n          loadedWorks = validData;\n        } else {\n          console.log(\"üìã „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì\");\n          console.log(\"TypeScript„Éï„Ç°„Ç§„É´„Åã„ÇâË™≠„ÅøËæº„Åø„Åæ„Åô...\");\n\n          // TypeScript„Éï„Ç°„Ç§„É´„Åã„ÇâÁõ¥Êé•Ë™≠„ÅøËæº„Åø\n          const validData = worksDynamicData.filter(validateWorksData);\n          console.log(\n            \"‚úÖ TypeScript„Éï„Ç°„Ç§„É´„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\",\n            validData.length,\n            \"‰ª∂\"\n          );\n          loadedWorks = validData;\n        }\n\n        // Ëá™ÂãïÁîüÊàêÊ©üËÉΩ: public/images/worksÂÜÖ„ÅÆ„Éï„Ç©„É´„ÉÄ„Åã„ÇâËá™ÂãïÁöÑ„Å´works„Éá„Éº„Çø„ÇíÁîüÊàê\n        const mergedWorks = await autoGenerateWorksData(loadedWorks);\n\n        // „Éá„Éº„Çø„ÇíË®≠ÂÆö\n        setWorks(mergedWorks);\n\n        // Ëá™ÂãïÁîüÊàê„Åï„Çå„Åü„Éá„Éº„Çø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò\n        if (mergedWorks.length > loadedWorks.length) {\n          console.log(\n            `üÜï ${mergedWorks.length - loadedWorks.length}‰ª∂„ÅÆÊñ∞Ë¶èworks„Éá„Éº„Çø„ÅåËá™ÂãïÁîüÊàê„Åï„Çå„Åæ„Åó„Åü`\n          );\n          saveToLocalStorage(STORAGE_KEY, mergedWorks);\n        } else if (backupData.length === 0) {\n          // ÂàùÂõûË™≠„ÅøËæº„ÅøÊôÇ„ÅØÂøÖ„Åö‰øùÂ≠ò\n          saveToLocalStorage(STORAGE_KEY, mergedWorks);\n        }\n      } catch (error) {\n        console.error(\"‚ùå „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:\", error);\n        console.log(\"ÂàùÊúü„Éá„Éº„Çø„Çí‰ΩøÁî®„Åó„Åæ„Åô\");\n        // „Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØÂàùÊúü„Éá„Éº„Çø„Çí‰ΩøÁî®\n        setWorks(worksData);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // „Éá„Éº„Çø„Çí‰øùÂ≠ò\n  const saveWorks = async (newWorks: Works[]) => {\n    try {\n      console.log(\"üíæ „Éá„Éº„Çø„Çí‰øùÂ≠ò‰∏≠...\", newWorks.length, \"‰ª∂\");\n\n      // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´Âç≥Â∫ß„Å´‰øùÂ≠òÔºàUIÊõ¥Êñ∞Ôºâ\n      const success = saveToLocalStorage(STORAGE_KEY, newWorks);\n      if (success) {\n        console.log(\"‚úÖ „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠òÂÆå‰∫Ü\");\n        setWorks(newWorks);\n      } else {\n        console.error(\"‚ùå „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å∏„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\n      }\n    } catch (error) {\n      console.error(\"‚ùå „Éá„Éº„Çø„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:\", error);\n    }\n  };\n\n  // „Éá„Éº„Çø„ÇíËøΩÂä†\n  const addWork = async (newWork: Works) => {\n    const updatedWorks = [...works, newWork];\n    await saveWorks(updatedWorks);\n  };\n\n  // „Éá„Éº„Çø„ÇíÊõ¥Êñ∞\n  const updateWork = async (id: number, updatedWork: Works) => {\n    const updatedWorks = works.map((work) =>\n      work.id === id ? updatedWork : work\n    );\n    await saveWorks(updatedWorks);\n  };\n\n  // „Éá„Éº„Çø„ÇíÂâäÈô§\n  const deleteWork = async (id: number) => {\n    const updatedWorks = works.filter((work) => work.id !== id);\n    await saveWorks(updatedWorks);\n  };\n\n  // „Éá„Éº„Çø„Çí„É™„Çª„ÉÉ„ÉàÔºàÂàùÊúü„Éá„Éº„Çø„Å´Êàª„ÅôÔºâ\n  const resetWorks = async () => {\n    await saveWorks(worksData);\n  };\n\n  // ÁâπÂÆö„ÅÆ‰ΩúÂìÅ„ÇíÂèñÂæó\n  const getWork = (id: number): Works | undefined => {\n    return works.find((work) => work.id === id);\n  };\n\n  return {\n    works,\n    isLoading,\n    saveWorks,\n    addWork,\n    updateWork,\n    deleteWork,\n    resetWorks,\n    getWork,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}