{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\n// 共通の認証チェック関数\nconst checkAuth = authKey => {\n  try {\n    const authStatus = localStorage.getItem(authKey);\n    const authTimestamp = localStorage.getItem(`${authKey}_timestamp`);\n    if (authStatus === \"true\" && authTimestamp) {\n      // 認証の有効期限をチェック（24時間）\n      const now = Date.now();\n      const authTime = parseInt(authTimestamp, 10);\n      const twentyFourHours = 24 * 60 * 60 * 1000; // 24時間をミリ秒で表現\n\n      if (now - authTime < twentyFourHours) {\n        return true;\n      } else {\n        // 認証期限切れの場合は認証情報を削除\n        localStorage.removeItem(authKey);\n        localStorage.removeItem(`${authKey}_timestamp`);\n        return false;\n      }\n    }\n    return false;\n  } catch (error) {\n    console.error(\"認証状態の確認中にエラーが発生しました:\", error);\n    return false;\n  }\n};\n\n// Works用の認証フック\nexport function useAuth() {\n  _s();\n  const [authState, setAuthState] = useState({\n    isAuthenticated: false,\n    isLoading: true\n  });\n\n  // 認証成功時の処理（BasicAuthコンポーネントから呼び出される）\n  const login = () => {\n    // 認証状態を再チェックしてから設定\n    const isAuth = checkAuth(\"works_auth\");\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false\n    });\n  };\n\n  // ログアウト処理\n  const logout = () => {\n    localStorage.removeItem(\"works_auth\");\n    localStorage.removeItem(\"works_auth_timestamp\");\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false\n    });\n  };\n\n  // コンポーネントマウント時に認証状態をチェック\n  useEffect(() => {\n    const isAuth = checkAuth(\"works_auth\");\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false\n    });\n  }, []);\n  return {\n    isAuthenticated: authState.isAuthenticated,\n    isLoading: authState.isLoading,\n    login,\n    logout\n  };\n}\n_s(useAuth, \"41RnQq+Ir8nTn7CV0nK+5zf5YjA=\");","map":{"version":3,"names":["useState","useEffect","checkAuth","authKey","authStatus","localStorage","getItem","authTimestamp","now","Date","authTime","parseInt","twentyFourHours","removeItem","error","console","useAuth","_s","authState","setAuthState","isAuthenticated","isLoading","login","isAuth","logout"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\ninterface AuthState {\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\n// 共通の認証チェック関数\nconst checkAuth = (authKey: string) => {\n  try {\n    const authStatus = localStorage.getItem(authKey);\n    const authTimestamp = localStorage.getItem(`${authKey}_timestamp`);\n\n    if (authStatus === \"true\" && authTimestamp) {\n      // 認証の有効期限をチェック（24時間）\n      const now = Date.now();\n      const authTime = parseInt(authTimestamp, 10);\n      const twentyFourHours = 24 * 60 * 60 * 1000; // 24時間をミリ秒で表現\n\n      if (now - authTime < twentyFourHours) {\n        return true;\n      } else {\n        // 認証期限切れの場合は認証情報を削除\n        localStorage.removeItem(authKey);\n        localStorage.removeItem(`${authKey}_timestamp`);\n        return false;\n      }\n    }\n    return false;\n  } catch (error) {\n    console.error(\"認証状態の確認中にエラーが発生しました:\", error);\n    return false;\n  }\n};\n\n// Works用の認証フック\nexport function useAuth() {\n  const [authState, setAuthState] = useState<AuthState>({\n    isAuthenticated: false,\n    isLoading: true,\n  });\n\n  // 認証成功時の処理（BasicAuthコンポーネントから呼び出される）\n  const login = () => {\n    // 認証状態を再チェックしてから設定\n    const isAuth = checkAuth(\"works_auth\");\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false,\n    });\n  };\n\n  // ログアウト処理\n  const logout = () => {\n    localStorage.removeItem(\"works_auth\");\n    localStorage.removeItem(\"works_auth_timestamp\");\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  };\n\n  // コンポーネントマウント時に認証状態をチェック\n  useEffect(() => {\n    const isAuth = checkAuth(\"works_auth\");\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false,\n    });\n  }, []);\n\n  return {\n    isAuthenticated: authState.isAuthenticated,\n    isLoading: authState.isLoading,\n    login,\n    logout,\n  };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAO3C;AACA,MAAMC,SAAS,GAAIC,OAAe,IAAK;EACrC,IAAI;IACF,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAACH,OAAO,CAAC;IAChD,MAAMI,aAAa,GAAGF,YAAY,CAACC,OAAO,CAAC,GAAGH,OAAO,YAAY,CAAC;IAElE,IAAIC,UAAU,KAAK,MAAM,IAAIG,aAAa,EAAE;MAC1C;MACA,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;MACtB,MAAME,QAAQ,GAAGC,QAAQ,CAACJ,aAAa,EAAE,EAAE,CAAC;MAC5C,MAAMK,eAAe,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;MAE7C,IAAIJ,GAAG,GAAGE,QAAQ,GAAGE,eAAe,EAAE;QACpC,OAAO,IAAI;MACb,CAAC,MAAM;QACL;QACAP,YAAY,CAACQ,UAAU,CAACV,OAAO,CAAC;QAChCE,YAAY,CAACQ,UAAU,CAAC,GAAGV,OAAO,YAAY,CAAC;QAC/C,OAAO,KAAK;MACd;IACF;IACA,OAAO,KAAK;EACd,CAAC,CAAC,OAAOW,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C,OAAO,KAAK;EACd;AACF,CAAC;;AAED;AACA,OAAO,SAASE,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAY;IACpDoB,eAAe,EAAE,KAAK;IACtBC,SAAS,EAAE;EACb,CAAC,CAAC;;EAEF;EACA,MAAMC,KAAK,GAAGA,CAAA,KAAM;IAClB;IACA,MAAMC,MAAM,GAAGrB,SAAS,CAAC,YAAY,CAAC;IACtCiB,YAAY,CAAC;MACXC,eAAe,EAAEG,MAAM;MACvBF,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBnB,YAAY,CAACQ,UAAU,CAAC,YAAY,CAAC;IACrCR,YAAY,CAACQ,UAAU,CAAC,sBAAsB,CAAC;IAC/CM,YAAY,CAAC;MACXC,eAAe,EAAE,KAAK;MACtBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;;EAED;EACApB,SAAS,CAAC,MAAM;IACd,MAAMsB,MAAM,GAAGrB,SAAS,CAAC,YAAY,CAAC;IACtCiB,YAAY,CAAC;MACXC,eAAe,EAAEG,MAAM;MACvBF,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLD,eAAe,EAAEF,SAAS,CAACE,eAAe;IAC1CC,SAAS,EAAEH,SAAS,CAACG,SAAS;IAC9BC,KAAK;IACLE;EACF,CAAC;AACH;AAACP,EAAA,CAzCeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}