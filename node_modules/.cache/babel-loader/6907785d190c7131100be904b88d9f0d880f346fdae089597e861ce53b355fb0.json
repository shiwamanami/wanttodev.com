{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nexport function useAuth() {\n  _s();\n  const [authState, setAuthState] = useState({\n    isAuthenticated: false,\n    isLoading: true\n  });\n\n  // 認証状態をチェックする関数\n  const checkAuth = () => {\n    try {\n      const authStatus = localStorage.getItem(\"works_auth\");\n      const authTimestamp = localStorage.getItem(\"works_auth_timestamp\");\n      if (authStatus === \"true\" && authTimestamp) {\n        // 認証の有効期限をチェック（24時間）\n        const now = Date.now();\n        const authTime = parseInt(authTimestamp, 10);\n        const twentyFourHours = 24 * 60 * 60 * 1000; // 24時間をミリ秒で表現\n\n        if (now - authTime < twentyFourHours) {\n          return true;\n        } else {\n          // 認証期限切れの場合は認証情報を削除\n          localStorage.removeItem(\"works_auth\");\n          localStorage.removeItem(\"works_auth_timestamp\");\n          return false;\n        }\n      }\n      return false;\n    } catch (error) {\n      console.error(\"認証状態の確認中にエラーが発生しました:\", error);\n      return false;\n    }\n  };\n\n  // 認証成功時の処理\n  const login = () => {\n    setAuthState({\n      isAuthenticated: true,\n      isLoading: false\n    });\n  };\n\n  // ログアウト処理\n  const logout = () => {\n    localStorage.removeItem(\"works_auth\");\n    localStorage.removeItem(\"works_auth_timestamp\");\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false\n    });\n  };\n\n  // コンポーネントマウント時に認証状態をチェック\n  useEffect(() => {\n    const isAuth = checkAuth();\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false\n    });\n  }, []);\n  return {\n    isAuthenticated: authState.isAuthenticated,\n    isLoading: authState.isLoading,\n    login,\n    logout\n  };\n}\n_s(useAuth, \"41RnQq+Ir8nTn7CV0nK+5zf5YjA=\");","map":{"version":3,"names":["useState","useEffect","useAuth","_s","authState","setAuthState","isAuthenticated","isLoading","checkAuth","authStatus","localStorage","getItem","authTimestamp","now","Date","authTime","parseInt","twentyFourHours","removeItem","error","console","login","logout","isAuth"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\ninterface AuthState {\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\nexport function useAuth() {\n  const [authState, setAuthState] = useState<AuthState>({\n    isAuthenticated: false,\n    isLoading: true,\n  });\n\n  // 認証状態をチェックする関数\n  const checkAuth = () => {\n    try {\n      const authStatus = localStorage.getItem(\"works_auth\");\n      const authTimestamp = localStorage.getItem(\"works_auth_timestamp\");\n\n      if (authStatus === \"true\" && authTimestamp) {\n        // 認証の有効期限をチェック（24時間）\n        const now = Date.now();\n        const authTime = parseInt(authTimestamp, 10);\n        const twentyFourHours = 24 * 60 * 60 * 1000; // 24時間をミリ秒で表現\n\n        if (now - authTime < twentyFourHours) {\n          return true;\n        } else {\n          // 認証期限切れの場合は認証情報を削除\n          localStorage.removeItem(\"works_auth\");\n          localStorage.removeItem(\"works_auth_timestamp\");\n          return false;\n        }\n      }\n      return false;\n    } catch (error) {\n      console.error(\"認証状態の確認中にエラーが発生しました:\", error);\n      return false;\n    }\n  };\n\n  // 認証成功時の処理\n  const login = () => {\n    setAuthState({\n      isAuthenticated: true,\n      isLoading: false,\n    });\n  };\n\n  // ログアウト処理\n  const logout = () => {\n    localStorage.removeItem(\"works_auth\");\n    localStorage.removeItem(\"works_auth_timestamp\");\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  };\n\n  // コンポーネントマウント時に認証状態をチェック\n  useEffect(() => {\n    const isAuth = checkAuth();\n    setAuthState({\n      isAuthenticated: isAuth,\n      isLoading: false,\n    });\n  }, []);\n\n  return {\n    isAuthenticated: authState.isAuthenticated,\n    isLoading: authState.isLoading,\n    login,\n    logout,\n  };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAO3C,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAY;IACpDM,eAAe,EAAE,KAAK;IACtBC,SAAS,EAAE;EACb,CAAC,CAAC;;EAEF;EACA,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACtB,IAAI;MACF,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;MACrD,MAAMC,aAAa,GAAGF,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC;MAElE,IAAIF,UAAU,KAAK,MAAM,IAAIG,aAAa,EAAE;QAC1C;QACA,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;QACtB,MAAME,QAAQ,GAAGC,QAAQ,CAACJ,aAAa,EAAE,EAAE,CAAC;QAC5C,MAAMK,eAAe,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;QAE7C,IAAIJ,GAAG,GAAGE,QAAQ,GAAGE,eAAe,EAAE;UACpC,OAAO,IAAI;QACb,CAAC,MAAM;UACL;UACAP,YAAY,CAACQ,UAAU,CAAC,YAAY,CAAC;UACrCR,YAAY,CAACQ,UAAU,CAAC,sBAAsB,CAAC;UAC/C,OAAO,KAAK;QACd;MACF;MACA,OAAO,KAAK;IACd,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C,OAAO,KAAK;IACd;EACF,CAAC;;EAED;EACA,MAAME,KAAK,GAAGA,CAAA,KAAM;IAClBhB,YAAY,CAAC;MACXC,eAAe,EAAE,IAAI;MACrBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMe,MAAM,GAAGA,CAAA,KAAM;IACnBZ,YAAY,CAACQ,UAAU,CAAC,YAAY,CAAC;IACrCR,YAAY,CAACQ,UAAU,CAAC,sBAAsB,CAAC;IAC/Cb,YAAY,CAAC;MACXC,eAAe,EAAE,KAAK;MACtBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC;;EAED;EACAN,SAAS,CAAC,MAAM;IACd,MAAMsB,MAAM,GAAGf,SAAS,CAAC,CAAC;IAC1BH,YAAY,CAAC;MACXC,eAAe,EAAEiB,MAAM;MACvBhB,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLD,eAAe,EAAEF,SAAS,CAACE,eAAe;IAC1CC,SAAS,EAAEH,SAAS,CAACG,SAAS;IAC9Bc,KAAK;IACLC;EACF,CAAC;AACH;AAACnB,EAAA,CAnEeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}