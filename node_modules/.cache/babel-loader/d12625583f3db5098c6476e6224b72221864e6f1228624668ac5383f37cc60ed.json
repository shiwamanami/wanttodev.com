{"ast":null,"code":"import React,{useState,useRef}from\"react\";import{Button}from\"./Button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ImageUpload(_ref){let{label,value=[],onChange,accept=\"image/*\",multiple=true}=_ref;const[dragOver,setDragOver]=useState(false);const fileInputRef=useRef(null);const handleFileSelect=files=>{if(!files)return;const newImages=[];Array.from(files).forEach(file=>{if(file.type.startsWith(\"image/\")){const reader=new FileReader();reader.onload=e=>{var _e$target;const src=(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result;const newImage={type:\"image\",src,alt:file.name};newImages.push(newImage);if(newImages.length===files.length){onChange([...value,...newImages]);}};reader.readAsDataURL(file);}});};const handleDrop=e=>{e.preventDefault();setDragOver(false);handleFileSelect(e.dataTransfer.files);};const handleDragOver=e=>{e.preventDefault();setDragOver(true);};const handleDragLeave=e=>{e.preventDefault();setDragOver(false);};const handleClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const removeImage=index=>{const newImages=value.filter((_,i)=>i!==index);onChange(newImages);};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:label}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-lg p-6 text-center transition-colors \".concat(dragOver?\"border-primary-500 bg-primary-500/10\":\"border-gray-600 hover:border-gray-500\"),onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,onClick:handleClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12\",stroke:\"currentColor\",fill:\"none\",viewBox:\"0 0 48 48\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\",strokeWidth:2,strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300\",children:\"\\u753B\\u50CF\\u3092\\u30C9\\u30E9\\u30C3\\u30B0&\\u30C9\\u30ED\\u30C3\\u30D7\\u3059\\u308B\\u304B\\u3001\\u30AF\\u30EA\\u30C3\\u30AF\\u3057\\u3066\\u9078\\u629E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG, WEBP \\u5F62\\u5F0F\\u3092\\u30B5\\u30DD\\u30FC\\u30C8\"})]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:accept,multiple:multiple,onChange:e=>handleFileSelect(e.target.files),className:\"hidden\"})]}),value.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\",children:value.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-square rounded-lg overflow-hidden bg-gray-700\",children:/*#__PURE__*/_jsx(\"img\",{src:image.src,alt:image.alt||\"\\u753B\\u50CF \".concat(index+1),className:\"w-full h-full object-cover\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeImage(index),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-xs text-gray-400 truncate\",children:image.alt||\"\\u753B\\u50CF \".concat(index+1)})]},index))}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:handleClick,className:\"w-full\",children:\"\\u753B\\u50CF\\u3092\\u9078\\u629E\"})]});}","map":{"version":3,"names":["React","useState","useRef","Button","jsx","_jsx","jsxs","_jsxs","ImageUpload","_ref","label","value","onChange","accept","multiple","dragOver","setDragOver","fileInputRef","handleFileSelect","files","newImages","Array","from","forEach","file","type","startsWith","reader","FileReader","onload","e","_e$target","src","target","result","newImage","alt","name","push","length","readAsDataURL","handleDrop","preventDefault","dataTransfer","handleDragOver","handleDragLeave","handleClick","_fileInputRef$current","current","click","removeImage","index","filter","_","i","className","children","concat","onDrop","onDragOver","onDragLeave","onClick","stroke","fill","viewBox","d","strokeWidth","strokeLinecap","strokeLinejoin","ref","map","image","variant"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/components/ImageUpload.tsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Button } from \"./Button\";\n\ninterface MediaItem {\n  type: \"image\" | \"video\";\n  src: string;\n  alt?: string;\n  thumbnail?: string;\n}\n\ninterface ImageUploadProps {\n  label: string;\n  value: MediaItem[];\n  onChange: (images: MediaItem[]) => void;\n  accept?: string;\n  multiple?: boolean;\n}\n\nexport default function ImageUpload({\n  label,\n  value = [],\n  onChange,\n  accept = \"image/*\",\n  multiple = true,\n}: ImageUploadProps) {\n  const [dragOver, setDragOver] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (files: FileList | null) => {\n    if (!files) return;\n\n    const newImages: MediaItem[] = [];\n\n    Array.from(files).forEach((file) => {\n      if (file.type.startsWith(\"image/\")) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          const src = e.target?.result as string;\n          const newImage: MediaItem = {\n            type: \"image\",\n            src,\n            alt: file.name,\n          };\n\n          newImages.push(newImage);\n\n          if (newImages.length === files.length) {\n            onChange([...value, ...newImages]);\n          }\n        };\n        reader.readAsDataURL(file);\n      }\n    });\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n    handleFileSelect(e.dataTransfer.files);\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const removeImage = (index: number) => {\n    const newImages = value.filter((_, i) => i !== index);\n    onChange(newImages);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <label className=\"block text-sm font-medium mb-2\">{label}</label>\n\n      {/* アップロードエリア */}\n      <div\n        className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n          dragOver\n            ? \"border-primary-500 bg-primary-500/10\"\n            : \"border-gray-600 hover:border-gray-500\"\n        }`}\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onClick={handleClick}\n      >\n        <div className=\"space-y-2\">\n          <div className=\"text-gray-400\">\n            <svg\n              className=\"mx-auto h-12 w-12\"\n              stroke=\"currentColor\"\n              fill=\"none\"\n              viewBox=\"0 0 48 48\"\n            >\n              <path\n                d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </svg>\n          </div>\n          <p className=\"text-sm text-gray-300\">\n            画像をドラッグ&ドロップするか、クリックして選択\n          </p>\n          <p className=\"text-xs text-gray-500\">PNG, JPG, WEBP 形式をサポート</p>\n        </div>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept={accept}\n          multiple={multiple}\n          onChange={(e) => handleFileSelect(e.target.files)}\n          className=\"hidden\"\n        />\n      </div>\n\n      {/* 画像プレビュー */}\n      {value.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n          {value.map((image, index) => (\n            <div key={index} className=\"relative group\">\n              <div className=\"aspect-square rounded-lg overflow-hidden bg-gray-700\">\n                <img\n                  src={image.src}\n                  alt={image.alt || `画像 ${index + 1}`}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => removeImage(index)}\n                className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity\"\n              >\n                ×\n              </button>\n              <div className=\"mt-1 text-xs text-gray-400 truncate\">\n                {image.alt || `画像 ${index + 1}`}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* アップロードボタン */}\n      <Button\n        type=\"button\"\n        variant=\"outline\"\n        onClick={handleClick}\n        className=\"w-full\"\n      >\n        画像を選択\n      </Button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}