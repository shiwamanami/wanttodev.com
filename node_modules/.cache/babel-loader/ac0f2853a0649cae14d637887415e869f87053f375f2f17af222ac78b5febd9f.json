{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const LazyImage=_ref=>{let{src,alt,className='',placeholder='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+',onLoad,onError,objectFit='contain'}=_ref;const[isLoaded,setIsLoaded]=useState(false);const[isInView,setIsInView]=useState(false);const[hasError,setHasError]=useState(false);const imgRef=useRef(null);useEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting){setIsInView(true);observer.disconnect();}},{threshold:0.1,rootMargin:'50px'});if(imgRef.current){observer.observe(imgRef.current);}return()=>observer.disconnect();},[]);const handleLoad=()=>{setIsLoaded(true);onLoad===null||onLoad===void 0?void 0:onLoad();};const handleError=()=>{setHasError(true);onError===null||onError===void 0?void 0:onError();};return/*#__PURE__*/_jsxs(\"div\",{ref:imgRef,className:\"relative \".concat(className),children:[!isLoaded&&!hasError&&/*#__PURE__*/_jsx(\"img\",{src:placeholder,alt:\"\",className:\"absolute inset-0 w-full h-full object-cover blur-sm\",\"aria-hidden\":\"true\"}),isInView&&/*#__PURE__*/_jsx(\"img\",{src:src,alt:alt,className:\"w-full h-full transition-opacity duration-300 \".concat(isLoaded?'opacity-100':'opacity-0'),style:{objectFit},onLoad:handleLoad,onError:handleError,loading:\"lazy\"}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-gray-200 text-gray-500\",children:\"\\u753B\\u50CF\\u306E\\u8AAD\\u307F\\u8FBC\\u307F\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F\"})]});};","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","LazyImage","_ref","src","alt","className","placeholder","onLoad","onError","objectFit","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","imgRef","observer","IntersectionObserver","_ref2","entry","isIntersecting","disconnect","threshold","rootMargin","current","observe","handleLoad","handleError","ref","concat","children","style","loading"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/components/LazyImage.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  alt: string;\n  className?: string;\n  placeholder?: string;\n  onLoad?: () => void;\n  onError?: () => void;\n  objectFit?: 'cover' | 'contain' | 'fill' | 'none' | 'scale-down';\n}\n\nexport const LazyImage: React.FC<LazyImageProps> = ({\n  src,\n  alt,\n  className = '',\n  placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+',\n  onLoad,\n  onError,\n  objectFit = 'contain',\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observer.disconnect();\n        }\n      },\n      {\n        threshold: 0.1,\n        rootMargin: '50px',\n      }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  const handleLoad = () => {\n    setIsLoaded(true);\n    onLoad?.();\n  };\n\n  const handleError = () => {\n    setHasError(true);\n    onError?.();\n  };\n\n  return (\n    <div ref={imgRef} className={`relative ${className}`}>\n      {!isLoaded && !hasError && (\n        <img\n          src={placeholder}\n          alt=\"\"\n          className=\"absolute inset-0 w-full h-full object-cover blur-sm\"\n          aria-hidden=\"true\"\n        />\n      )}\n      {isInView && (\n        <img\n          src={src}\n          alt={alt}\n          className={`w-full h-full transition-opacity duration-300 ${\n            isLoaded ? 'opacity-100' : 'opacity-0'\n          }`}\n          style={{ objectFit }}\n          onLoad={handleLoad}\n          onError={handleError}\n          loading=\"lazy\"\n        />\n      )}\n      {hasError && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-200 text-gray-500\">\n          画像の読み込みに失敗しました\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAY3D,MAAO,MAAM,CAAAC,SAAmC,CAAGC,IAAA,EAQ7C,IAR8C,CAClDC,GAAG,CACHC,GAAG,CACHC,SAAS,CAAG,EAAE,CACdC,WAAW,CAAG,4LAA4L,CAC1MC,MAAM,CACNC,OAAO,CACPC,SAAS,CAAG,SACd,CAAC,CAAAP,IAAA,CACC,KAAM,CAACQ,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACkB,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAsB,MAAM,CAAGrB,MAAM,CAAmB,IAAI,CAAC,CAE7CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACvCC,KAAA,EAAa,IAAZ,CAACC,KAAK,CAAC,CAAAD,KAAA,CACN,GAAIC,KAAK,CAACC,cAAc,CAAE,CACxBR,WAAW,CAAC,IAAI,CAAC,CACjBI,QAAQ,CAACK,UAAU,CAAC,CAAC,CACvB,CACF,CAAC,CACD,CACEC,SAAS,CAAE,GAAG,CACdC,UAAU,CAAE,MACd,CACF,CAAC,CAED,GAAIR,MAAM,CAACS,OAAO,CAAE,CAClBR,QAAQ,CAACS,OAAO,CAACV,MAAM,CAACS,OAAO,CAAC,CAClC,CAEA,MAAO,IAAMR,QAAQ,CAACK,UAAU,CAAC,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,UAAU,CAAGA,CAAA,GAAM,CACvBhB,WAAW,CAAC,IAAI,CAAC,CACjBJ,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAG,CAAC,CACZ,CAAC,CAED,KAAM,CAAAqB,WAAW,CAAGA,CAAA,GAAM,CACxBb,WAAW,CAAC,IAAI,CAAC,CACjBP,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAG,CAAC,CACb,CAAC,CAED,mBACER,KAAA,QAAK6B,GAAG,CAAEb,MAAO,CAACX,SAAS,aAAAyB,MAAA,CAAczB,SAAS,CAAG,CAAA0B,QAAA,EAClD,CAACrB,QAAQ,EAAI,CAACI,QAAQ,eACrBhB,IAAA,QACEK,GAAG,CAAEG,WAAY,CACjBF,GAAG,CAAC,EAAE,CACNC,SAAS,CAAC,qDAAqD,CAC/D,cAAY,MAAM,CACnB,CACF,CACAO,QAAQ,eACPd,IAAA,QACEK,GAAG,CAAEA,GAAI,CACTC,GAAG,CAAEA,GAAI,CACTC,SAAS,kDAAAyB,MAAA,CACPpB,QAAQ,CAAG,aAAa,CAAG,WAAW,CACrC,CACHsB,KAAK,CAAE,CAAEvB,SAAU,CAAE,CACrBF,MAAM,CAAEoB,UAAW,CACnBnB,OAAO,CAAEoB,WAAY,CACrBK,OAAO,CAAC,MAAM,CACf,CACF,CACAnB,QAAQ,eACPhB,IAAA,QAAKO,SAAS,CAAC,6EAA6E,CAAA0B,QAAA,CAAC,sFAE7F,CAAK,CACN,EACE,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}