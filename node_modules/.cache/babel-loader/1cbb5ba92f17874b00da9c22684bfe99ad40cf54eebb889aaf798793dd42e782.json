{"ast":null,"code":"var _jsxFileName = \"/Users/shiwa/Desktop/wanttodev.com/src/components/LazyImage.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const LazyImage = ({\n  src,\n  alt,\n  className = '',\n  placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+',\n  onLoad,\n  onError,\n  objectFit = 'contain'\n}) => {\n  _s();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef(null);\n  useEffect(() => {\n    const observer = new IntersectionObserver(([entry]) => {\n      if (entry.isIntersecting) {\n        setIsInView(true);\n        observer.disconnect();\n      }\n    }, {\n      threshold: 0.1,\n      rootMargin: '50px'\n    });\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n    return () => observer.disconnect();\n  }, []);\n  const handleLoad = () => {\n    setIsLoaded(true);\n    onLoad === null || onLoad === void 0 ? void 0 : onLoad();\n  };\n  const handleError = () => {\n    setHasError(true);\n    onError === null || onError === void 0 ? void 0 : onError();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: imgRef,\n    className: `relative ${className}`,\n    children: [!isLoaded && !hasError && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: placeholder,\n      alt: \"\",\n      className: \"absolute inset-0 w-full h-full object-cover blur-sm\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), isInView && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: src,\n      alt: alt,\n      className: `w-full h-full transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'}`,\n      style: {\n        objectFit\n      },\n      onLoad: handleLoad,\n      onError: handleError,\n      loading: \"lazy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex items-center justify-center bg-gray-200 text-gray-500\",\n      children: \"\\u753B\\u50CF\\u306E\\u8AAD\\u307F\\u8FBC\\u307F\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(LazyImage, \"lD2QpFOlG/O2pb/qx+bApBIkHaM=\");\n_c = LazyImage;\nvar _c;\n$RefreshReg$(_c, \"LazyImage\");","map":{"version":3,"names":["useState","useRef","useEffect","jsxDEV","_jsxDEV","LazyImage","src","alt","className","placeholder","onLoad","onError","objectFit","_s","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","imgRef","observer","IntersectionObserver","entry","isIntersecting","disconnect","threshold","rootMargin","current","observe","handleLoad","handleError","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","style","loading","_c","$RefreshReg$"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/components/LazyImage.tsx"],"sourcesContent":["import { useState, useRef, useEffect, ReactNode } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  alt: string;\n  className?: string;\n  placeholder?: string;\n  onLoad?: (() => void) | undefined;\n  onError?: (() => void) | undefined;\n  objectFit?: 'cover' | 'contain' | 'fill' | 'none' | 'scale-down';\n}\n\nexport const LazyImage = ({\n  src,\n  alt,\n  className = '',\n  placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PC9zdmc+',\n  onLoad,\n  onError,\n  objectFit = 'contain',\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observer.disconnect();\n        }\n      },\n      {\n        threshold: 0.1,\n        rootMargin: '50px',\n      }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  const handleLoad = () => {\n    setIsLoaded(true);\n    onLoad?.();\n  };\n\n  const handleError = () => {\n    setHasError(true);\n    onError?.();\n  };\n\n  return (\n    <div ref={imgRef} className={`relative ${className}`}>\n      {!isLoaded && !hasError && (\n        <img\n          src={placeholder}\n          alt=\"\"\n          className=\"absolute inset-0 w-full h-full object-cover blur-sm\"\n          aria-hidden=\"true\"\n        />\n      )}\n      {isInView && (\n        <img\n          src={src}\n          alt={alt}\n          className={`w-full h-full transition-opacity duration-300 ${\n            isLoaded ? 'opacity-100' : 'opacity-0'\n          }`}\n          style={{ objectFit }}\n          onLoad={handleLoad}\n          onError={handleError}\n          loading=\"lazy\"\n        />\n      )}\n      {hasError && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-200 text-gray-500\">\n          画像の読み込みに失敗しました\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAmB,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAY/D,OAAO,MAAMC,SAAS,GAAGA,CAAC;EACxBC,GAAG;EACHC,GAAG;EACHC,SAAS,GAAG,EAAE;EACdC,WAAW,GAAG,4LAA4L;EAC1MC,MAAM;EACNC,OAAO;EACPC,SAAS,GAAG;AACd,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMoB,MAAM,GAAGnB,MAAM,CAAmB,IAAI,CAAC;EAE7CC,SAAS,CAAC,MAAM;IACd,MAAMmB,QAAQ,GAAG,IAAIC,oBAAoB,CACvC,CAAC,CAACC,KAAK,CAAC,KAAK;MACX,IAAIA,KAAK,CAACC,cAAc,EAAE;QACxBP,WAAW,CAAC,IAAI,CAAC;QACjBI,QAAQ,CAACI,UAAU,CAAC,CAAC;MACvB;IACF,CAAC,EACD;MACEC,SAAS,EAAE,GAAG;MACdC,UAAU,EAAE;IACd,CACF,CAAC;IAED,IAAIP,MAAM,CAACQ,OAAO,EAAE;MAClBP,QAAQ,CAACQ,OAAO,CAACT,MAAM,CAACQ,OAAO,CAAC;IAClC;IAEA,OAAO,MAAMP,QAAQ,CAACI,UAAU,CAAC,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,UAAU,GAAGA,CAAA,KAAM;IACvBf,WAAW,CAAC,IAAI,CAAC;IACjBL,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,CAAC;EACZ,CAAC;EAED,MAAMqB,WAAW,GAAGA,CAAA,KAAM;IACxBZ,WAAW,CAAC,IAAI,CAAC;IACjBR,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAG,CAAC;EACb,CAAC;EAED,oBACEP,OAAA;IAAK4B,GAAG,EAAEZ,MAAO;IAACZ,SAAS,EAAE,YAAYA,SAAS,EAAG;IAAAyB,QAAA,GAClD,CAACnB,QAAQ,IAAI,CAACI,QAAQ,iBACrBd,OAAA;MACEE,GAAG,EAAEG,WAAY;MACjBF,GAAG,EAAC,EAAE;MACNC,SAAS,EAAC,qDAAqD;MAC/D,eAAY;IAAM;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CACF,EACArB,QAAQ,iBACPZ,OAAA;MACEE,GAAG,EAAEA,GAAI;MACTC,GAAG,EAAEA,GAAI;MACTC,SAAS,EAAE,iDACTM,QAAQ,GAAG,aAAa,GAAG,WAAW,EACrC;MACHwB,KAAK,EAAE;QAAE1B;MAAU,CAAE;MACrBF,MAAM,EAAEoB,UAAW;MACnBnB,OAAO,EAAEoB,WAAY;MACrBQ,OAAO,EAAC;IAAM;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACf,CACF,EACAnB,QAAQ,iBACPd,OAAA;MAAKI,SAAS,EAAC,6EAA6E;MAAAyB,QAAA,EAAC;IAE7F;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACxB,EAAA,CA3EWR,SAAS;AAAAmC,EAAA,GAATnC,SAAS;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}